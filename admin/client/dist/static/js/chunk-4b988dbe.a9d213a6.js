(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b988dbe"],{"26dd2":function(e,t,r){"use strict";r.r(t);var a,n=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("服务开关")]),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.serverInfoList,height:"650"}},[t("el-table-column",{attrs:{label:"集群名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cluster_name)+" ")]}}])}),t("el-table-column",{attrs:{label:"服务状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseStatus(t.row.status))+" ")]}}])}),t("el-table-column",{attrs:{label:"服务开关"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-radio-group",{on:{change:function(t){return e.handleChange(r)}},model:{value:r.row.switch,callback:function(t){e.$set(r.row,"switch",t)},expression:"scope.row.switch"}},[t("el-radio",{attrs:{label:0}},[e._v("关闭")]),t("el-radio",{attrs:{label:1}},[e._v("关闭入口")]),t("el-radio",{attrs:{label:2}},[e._v("白名单")]),t("el-radio",{attrs:{label:3}},[e._v("开启")])],1)]}}])})],1)],1),t("el-col",{attrs:{span:12}},[t("div",{staticStyle:{"text-align":"center","padding-top":"10px"}},[e._v("白名单")]),t("div",{staticStyle:{"text-align":"center","padding-top":"10px","padding-bottom":"10px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"请输入玩家ID"},model:{value:e.addPlayerId,callback:function(t){e.addPlayerId=t},expression:"addPlayerId"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addWhite}},[e._v("新增白名单")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.whiteList,height:"650"}},[t("el-table-column",{attrs:{label:"玩家ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.player_id)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.delWhite(r.row.player_id)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)},s=[],c=r("c7eb"),i=r("1da1"),o=r("ade3"),l=(r("4e82"),r("a9e3"),r("a434"),r("b775"));function u(){return Object(l["a"])({url:"/server_switch/infos",method:"get"})}function d(e){return Object(l["a"])({url:"/server_switch/change_switch",method:"post",data:e})}function h(){return Object(l["a"])({url:"/server_switch/white_info",method:"get"})}function p(e){return Object(l["a"])({url:"/server_switch/add_white",method:"post",data:e})}function f(e){return Object(l["a"])({url:"/server_switch/del_white",method:"post",data:e})}var w=(a={},Object(o["a"])(a,0,"关闭"),Object(o["a"])(a,1,"关闭入口"),Object(o["a"])(a,2,"白名单"),Object(o["a"])(a,3,"开启"),a),b={data:function(){return{serverInfoList:[],whiteList:[],addPlayerId:null}},created:function(){this.getServerInfos(),this.getWhiteInfos()},methods:{getServerInfos:function(){var e=this;return Object(i["a"])(Object(c["a"])().mark((function t(){var r,a,n,s;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:for(n in r=t.sent,a=[],r.data)s=r.data[n],s.preVal=s.switch,a.push(s);a.sort((function(e,t){return e.cluster_name-t.cluster_name})),e.serverInfoList=a;case 7:case"end":return t.stop()}}),t)})))()},changeSwitch:function(e,t){return Object(i["a"])(Object(c["a"])().mark((function r(){var a,n;return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d({cluster_name:e,switch:t});case 2:return a=r.sent,n=a.data.result,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))()},parseStatus:function(e){return 0==e?"未启动":"已启动"},handleChange:function(e){var t=this,r=Number(e.row.switch);this.$confirm("您确定要调整为"+w[r]+"状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.changeSwitch(e.row.cluster_name,r).then((function(a){1==a?(e.row.preVal=r,t.$message({type:"success",message:"操作成功"})):(e.row.switch=e.row.preVal,t.$message({type:"info",message:"操作失败"}))})).catch((function(){e.row.switch=e.row.preVal,t.$message({type:"info",message:"已取消操作"})}))})).catch((function(){e.row.switch=e.row.preVal,t.$message({type:"info",message:"已取消操作"})}))},getWhiteInfos:function(){var e=this;return Object(i["a"])(Object(c["a"])().mark((function t(){var r,a,n,s;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(r=t.sent,a=[],Array.isArray(r.data))for(n=0;n<r.data.length;n++)s=r.data[n],a.push({player_id:s});a.sort((function(e,t){return t.player_id-e.player_id})),e.whiteList=a;case 7:case"end":return t.stop()}}),t)})))()},addWhite:function(){var e=this;return Object(i["a"])(Object(c["a"])().mark((function t(){var r,a,n;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Number(e.addPlayerId),NaN!=r){t.next=4;break}return e.$message({type:"error",message:"参数错误"}),t.abrupt("return");case 4:return t.next=6,p({player_id:r});case 6:a=t.sent,n=a.data.result,1==n?(e.whiteList.push({player_id:r}),e.whiteList.sort((function(e,t){return t.player_id-e.player_id})),e.$message({type:"success",message:"添加成功"})):e.$message({type:"error",message:"添加失败"});case 9:case"end":return t.stop()}}),t)})))()},delWhite:function(e){var t=this;return Object(i["a"])(Object(c["a"])().mark((function r(){var a,n,s,i;return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,f({player_id:e});case 2:if(a=r.sent,n=a.data.result,1!=n){r.next=17;break}s=0;case 6:if(!(s<t.whiteList.length)){r.next=14;break}if(i=t.whiteList[s],i.player_id!=e){r.next=11;break}return t.whiteList.splice(s,1),r.abrupt("break",14);case 11:s++,r.next=6;break;case 14:t.$message({type:"success",message:"删除成功"}),r.next=18;break;case 17:t.$message({type:"error",message:"删除失败"});case 18:case"end":return r.stop()}}),r)})))()}}},g=b,m=r("2877"),v=Object(m["a"])(g,n,s,!1,null,null,null);t["default"]=v.exports},"4e82":function(e,t,r){"use strict";var a=r("23e7"),n=r("1c0b"),s=r("7b0b"),c=r("d039"),i=r("a640"),o=[],l=o.sort,u=c((function(){o.sort(void 0)})),d=c((function(){o.sort(null)})),h=i("sort"),p=u||!d||!h;a({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?l.call(s(this)):l.call(s(this),n(e))}})},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),s=r("a691"),c=r("50c4"),i=r("7b0b"),o=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),h=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,w=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!h||!p},{splice:function(e,t){var r,a,u,d,h,p,m=i(this),v=c(m.length),_=n(e,v),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=v-_):(r=y-2,a=w(f(s(t),0),v-_)),v+r-a>b)throw TypeError(g);for(u=o(m,a),d=0;d<a;d++)h=_+d,h in m&&l(u,d,m[h]);if(u.length=a,r<a){for(d=_;d<v-a;d++)h=d+a,p=d+r,h in m?m[p]=m[h]:delete m[p];for(d=v;d>v-a+r;d--)delete m[d-1]}else if(r>a)for(d=v-a;d>_;d--)h=d+a-1,p=d+r-1,h in m?m[p]=m[h]:delete m[p];for(d=0;d<r;d++)m[d+_]=arguments[d+2];return m.length=v-a+r,u}})}}]);